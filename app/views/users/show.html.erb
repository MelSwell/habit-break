<h1><%= @user.name%>'s Profile Page</h1>
<p>Username: <%= @user.username %></p>


<% if @friendships.include?(cookies[:user_id].to_i) %>
  <p>You are following this user</p>
  <%= button_to "Unfollow #{@user.name}", "/friendships/#{@friendship_id}", params: {followee_id: @user.id}, method: :delete  %>
<% else %>
  <%= button_to "Follow #{@user.name}", '/friendships', params: {followee_id: @user.id} %>
<% end %>


<h2>Recent Logs:</h2>

<% @user.habit_logs.each do |log| %>
  <h3><%= link_to log.user_habit.habit.name, habit_log_path(log) %></h3>
  <ul>
    <li>Mood: <%= log.mood %></li>
    <li>Entry: <%= log.entry %></li>
    <li>Reached Daily Goal: <%= log.daily_goal_reached %></li>
    <% if log.encouragements.count == 1 %>
      <li><%= log.encouragements.count %> Encouragement</li>
    <% elsif log.encouragements.count > 1 %>
      <li><%= log.encouragements.count %> Encouragements</li>
    <% end %>
    <li>Posted On <%= log.created_at.to_date %> @ <%= log.formatted_time %></li>
    <% if log.encouragements.any? %>
      <% log.encouragements.each do |e| %>
        <br>
        <ul>
          <li><%= e.user.username %>:</li>
          <ul>
            <li><%= e.comment %></li>
            <li><%= e.created_at.to_date %> @ <%= e.formatted_time %></li>
          </ul>
          <% if e.user_id == cookies[:user_id].to_i %>
            <%= button_to "Edit", edit_encouragement_path(e), method: :get %>
          <% end %>
        </ul>
      <% end%>
    <% end %>
  </ul>
<% end %>

